<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practical Work 2</title>
    <!-- Bootstrap CSS CDN for good layout design (as required for the Practical Work) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: grey;
            font-family: Arial, sans-serif;
        }
        .registration-form {
            max-width: 800px;
            margin: 30px auto;
            padding: 30px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        .highlight { /* Style for onFocus event (b)ii) */
            border: 2px solid #0d6efd; !important;
            box-shadow: 0 0 8px rgba(13, 110, 253, 0.5);
            transition: all 0.2s;
        }
        .form-label {
            font-weight: 600;
        }
        .address-separator {
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 20px;
            padding-bottom: 10px;
            font-size: 1.25rem;
            color: #6c757d;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="registration-form">
            <h3 class="text-center mb-4 text-primary">POLITEKNIK KUCHING SARAWAK<br>Student Registration Form</h3>

            <!-- (a) HTML Code for this form -->
            <form id="registrationForm" class="row g-3" novalidate>

                <!-- Student Image Upload -->
                <div class="col-12">
                    <label for="studentImage" class="form-label">Student image (less than 5 Mb)</label>
                    <input class="form-control" type="file" id="studentImage" accept="image/*" required>
                </div>

                <!-- Student Name (b)iii: onChange to caps lock) -->
                <div class="col-md-6">
                    <label for="studentName" class="form-label">Student Name</label>
                    <input type="text" class="form-control" id="studentName" onchange="toCapitalCase(this)" required>
                </div>

                <!-- Father's Name (b)iii: onChange to caps lock) -->
                <div class="col-md-6">
                    <label for="fatherName" class="form-label">Father's Name</label>
                    <input type="text" class="form-control" id="fatherName" onchange="toCapitalCase(this)" required>
                </div>

                <!-- Mother's Name (b)iii: onChange to caps lock) -->
                <div class="col-md-6">
                    <label for="motherName" class="form-label">Mother's Name:</label>
                    <input type="text" class="form-control" id="motherName" onchange="toCapitalCase(this)" required>
                </div>

                <!-- Gender Radio Buttons -->
                <div class="col-md-6 d-flex align-items-center">
                    <label class="form-label me-3 mb-0">Gender:</label>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="gender" id="genderMale" value="Male" required>
                        <label class="form-check-label" for="genderMale">Male</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="gender" id="genderFemale" value="Female">
                        <label class="form-check-label" for="genderFemale">Female</label>
                    </div>
                </div>

                <!-- Date of Birth -->
                <div class="col-md-6">
                    <label for="dob" class="form-label">Date of Birth</label>
                    <input type="date" class="form-control" id="dob" required>
                </div>

                <!-- Email (b)ii: onFocus/onBlur event for highlighting) -->
                <div class="col-md-6">
                    <label for="email" class="form-label">E-mail</label>
                    <input type="email" class="form-control" id="email" 
                           onfocus="highlightField(this)" 
                           onblur="resetHighlight(this)" 
                           required>
                </div>

                <!-- Level Dropdown (as shown in image) -->
                <div class="col-md-6">
                    <label for="level" class="form-label">Level:</label>
                    <select id="level" class="form-select" required>
                        <option value="Phd" selected>Phd</option>
                        <option value="Degree">Degree</option>
                        <option value="Diploma">Diploma</option>
                    </select>
                </div>

                <!-- Department Dropdown (as shown in image) -->
                <div class="col-md-6">
                    <label for="department" class="form-label">Department:</label>
                    <select id="department" class="form-select" required>
                        <option value="JKE" selected>Electrical Engineering</option>
                        <option value="JTMK">Information Technology And Communication</option>
                        <option value="JKA">Civil Engineering</option>
                    </select>
                </div>

                <!-- Mobile (b)i: onBlur validation) -->
                <div class="col-12">
                    <label for="mobile" class="form-label">Tel/Mobile</label>
                    <input type="tel" class="form-control" id="mobile" pattern="[0-9]{10,12}" 
                           onblur="validateMobile(this)" 
                           required>
                    <div id="mobileFeedback" class="text-danger small mt-1"></div>
                </div>
                
                <!-- Address Section -->
                <div class="col-12 mt-4">
                    <h5 class="address-separator text-center">Address</h5>
                </div>

                <!-- Address Fields -->
                <div class="col-md-4">
                    <label for="state" class="form-label">State:</label>
                    <input type="text" class="form-control" id="state" required>
                </div>
                <div class="col-md-4">
                    <label for="city" class="form-label">City:</label>
                    <input type="text" class="form-control" id="city" required>
                </div>
                <div class="col-md-4">
                    <label for="postcode" class="form-label">Postcode:</label>
                    <input type="text" class="form-control" id="postcode" pattern="[0-9]{5}" required>
                </div>

                <!-- Submission Buttons -->
                <div class="col-12 mt-4 text-center">
                    <button type="submit" class="btn btn-primary btn-lg me-3">Register</button>
                    <button type="reset" class="btn btn-secondary btn-lg">Reset</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Modal (b)iv: Modal on Submission) -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="successModalLabel">Success! âœ…</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <p class="fs-4 text-success">**Your details have been saved!**</p>
                    <p>Welcome to Politeknik Kuching Sarawak.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle (Includes Popper.js) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript for (b) -->
    <script>
        // (b)i: onBlur (Applied to Tel/Mobile field for custom validation)
        function validateMobile(input) {
            const feedback = document.getElementById('mobileFeedback');
            const value = input.value.trim();

            const mobilePattern = /^[0-9]{10,12}$/;
            if (value && !mobilePattern.test(value)) {
                feedback.textContent = 'Mobile must be 10-12 digits.';
                input.classList.add('is-invalid');
                input.classList.remove('is-valid');
            } else {
                feedback.textContent = '';
                // Only mark as valid if value exists and passes pattern check (HTML5 takes care of 'required')
                if (value) {
                   input.classList.add('is-valid');
                }
                input.classList.remove('is-invalid');
            }
        }
        
        // (b)ii: onFocus/onBlur for email field
        function highlightField(input) {
            input.classList.add('highlight');
        }

        function resetHighlight(input) {
            input.classList.remove('highlight');
        }

        // (b)iii: onChange for textfield (student'sname, father's name, mother's name) to change the text to caps lock.
        function toCapitalCase(input) {
            input.value = input.value.toUpperCase();
        }

        // (b)iv: Upon submission using Register button, use modal bootstrap to show the successful message
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault(); 
            
            const form = event.target;
            // Force re-validation of custom fields like mobile on final submit
            validateMobile(document.getElementById('mobile'));
            
            let isValid = form.checkValidity();

            // Check if mobile field passed custom validation too
            if (document.getElementById('mobile').classList.contains('is-invalid')) {
                 isValid = false;
            }

            // Apply Bootstrap's visual feedback (was-validated)
            form.classList.add('was-validated'); 

            if (isValid) {
                // All validation passed
                console.log("Form data is valid. Simulating submission...");

                // Show the Bootstrap Success Modal
                const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                successModal.show();

                // Reset the form and validation styles after showing success
                form.reset();
                form.classList.remove('was-validated');
                form.querySelectorAll('.is-valid, .is-invalid').forEach(el => {
                    el.classList.remove('is-valid', 'is-invalid');
                });
                document.getElementById('mobileFeedback').textContent = '';

            } else {
                // If validation failed
                // Using a custom message box instead of alert()
                const messageBox = document.createElement('div');
                messageBox.className = 'alert alert-danger fixed-top mx-auto mt-2 text-center';
                messageBox.style.maxWidth = '400px';
                messageBox.textContent = 'Please correct the highlighted fields before registering.';
                document.body.prepend(messageBox);
                
                setTimeout(() => {
                    messageBox.remove();
                }, 3000);
            }
        });
    </script>
</body>
</html>

